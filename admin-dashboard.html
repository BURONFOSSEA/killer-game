<!DOCTYPE html>
      if (!nomPartie) { alert('‚ö†Ô∏è Veuillez entrer un nom de partie'); return; }
      try {
        await supabaseInsert('parties', { nom_partie: nomPartie, statut: 'creee' });
        alert('‚úÖ Partie cr√©√©e !');
        document.getElementById('nomPartie').value = '';
        chargerParties();
      } catch (error) {
        alert('‚ùå Erreur');
      }
    }

    async function chargerParties() {
      try {
        const parties = await supabaseSelect('parties');
        let html = '<table><tr><th>Nom de la partie</th><th>Statut</th><th>Date</th><th>Actions</th></tr>';
        parties.forEach(partie => {
          const statutBadge = partie.statut === 'terminee' ? '<span style="background:#28a745;color:white;padding:4px 8px;border-radius:12px;">üèÜ Termin√©e</span>' : partie.statut;
          const btnConfig = partie.statut === 'creee' ? `<button class="btn btn-primary" onclick="alert('Configuration simplifi√©e - √† d√©velopper')">‚öôÔ∏è Configurer</button>` : '';
          const btnDetails = (partie.statut === 'lancee' || partie.statut === 'terminee') ? `<button class="btn btn-success" onclick="alert('D√©tails - √† d√©velopper')">üëÅÔ∏è Voir d√©tails</button>` : '';
          html += `<tr><td>${partie.nom_partie}</td><td>${statutBadge}</td><td>${new Date(partie.created_at).toLocaleDateString('fr-FR')}</td><td>${btnConfig}${btnDetails}</td></tr>`;
        });
        html += '</table>';
        document.getElementById('partiesTable').innerHTML = html;
      } catch (error) {
        document.getElementById('partiesTable').innerHTML = '<p>Erreur de chargement</p>';
      }
    }

    async function ajouterDefi() {
      const description = document.getElementById('nouveauDefi').value;
      if (!description) { alert('‚ö†Ô∏è Veuillez entrer une description'); return; }
      try {
        await supabaseInsert('defis', { description });
        alert('‚úÖ D√©fi ajout√© !');
        document.getElementById('nouveauDefi').value = '';
        chargerDefis();
      } catch (error) {
        alert('‚ùå Erreur');
      }
    }

    async function chargerDefis() {
      try {
        const defis = await supabaseSelect('defis');
        let html = '<table><tr><th>Description du d√©fi</th></tr>';
        defis.forEach(defi => {
          html += `<tr><td>${defi.description}</td></tr>`;
        });
        html += '</table>';
        document.getElementById('defisTable').innerHTML = html;
      } catch (error) {
        document.getElementById('defisTable').innerHTML = '<p>Erreur de chargement</p>';
      }
    }

    async function chargerKills() {
      try {
        const kills = await supabaseSelect('kills_en_attente', '?statut_kill=eq.conteste');
        if (kills.length === 0) {
          document.getElementById('killsTable').innerHTML = '<p>Aucun kill contest√© pour le moment.</p>';
        } else {
          let html = '<table><tr><th>Tueur</th><th>Cible</th><th>D√©fi</th><th>Date</th><th>Actions</th></tr>';
          for (const kill of kills) {
            const tueur = await supabaseSelect('joueurs', `?id=eq.${kill.id_tueur}`);
            const cible = await supabaseSelect('joueurs', `?id=eq.${kill.id_cible}`);
            const defi = await supabaseSelect('defis', `?id=eq.${kill.id_defi}`);
            if (tueur[0] && cible[0] && defi[0]) {
              html += `<tr><td>${tueur[0].pseudo}</td><td>${cible[0].pseudo}</td><td>${defi[0].description}</td><td>${new Date(kill.created_at).toLocaleDateString('fr-FR')}</td><td><button class="btn btn-success" onclick="alert('Valider - √† d√©velopper')">‚úÖ Valider</button><button class="btn btn-danger" onclick="alert('Invalider - √† d√©velopper')">‚ùå Invalider</button></td></tr>`;
            }
          }
          html += '</table>';
          document.getElementById('killsTable').innerHTML = html;
        }
      } catch (error) {
        document.getElementById('killsTable').innerHTML = '<p>Erreur de chargement</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      const sectionActive = localStorage.getItem('adminActiveSection') || 'inscriptions';
      const boutonActif = document.querySelector(`button[onclick*="${sectionActive}"]`);
      if (boutonActif) {
        showSection(sectionActive, boutonActif);
      } else {
        chargerInscriptions();
      }
    });
  </script>
</body>
</html>
